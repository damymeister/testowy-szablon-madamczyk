___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "help": {
    "messageId": "TAG_HELP",
    "description": "Tag help.",
    "text": "If you have any questions, contact your RTB House Customer Service Manager."
  },
  "displayName": "testowy-szablon-madamczyk",
  "description": "",
  "categories": [
    "REMARKETING",
    "PERSONALIZATION",
    "ADVERTISING"
  ],
  "securityGroups": [
    "NON_GOOGLE_SCRIPTS"
  ],
  "id": "cvt_K4VST",
  "type": "TAG",
  "version": 1,
  "brand": {
    "thumbnail": "data:image/png;base64,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\u003d\u003d",
    "displayName": "testowy-rtbb",
    "id": "github.com_rtbhouse-apps"
  },
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "SELECT",
    "name": "tagType",
    "displayName": "Hosted Tag Type",
    "macrosInSelect": false,
    "selectItems": [
      {
        "value": "BASE_TAG",
        "displayValue": "Base tag"
      },
      {
        "value": "EVENT_TAG",
        "displayValue": "Event tag"
      }
    ],
    "simpleValueType": true,
    "help": "Base tag should be executed on all page view events. It is required for Event tags to work. Event tags should be executed for individual events."
  },
  {
    "help": {
      "messageId": "TAGGING_HASH_HELP",
      "description": "Tagging hash field hint help.",
      "text": "In this field you should insert the static client tagging hash identifier which you can receive from your RTB House Customer Service Manager."
    },
    "valueValidators": [
      {
        "args": [
          20,
          20
        ],
        "type": "STRING_LENGTH"
      },
      {
        "args": [
          "^[a-zA-Z0-9]{20}$"
        ],
        "type": "REGEX"
      }
    ],
    "displayName": {
      "messageId": "TAGGING_HASH_NAME",
      "description": "Tagging hash field.",
      "text": "Tagging hash"
    },
    "name": "advTaggingHash",
    "type": "TEXT",
    "valueHint": {
      "messageId": "TAGGING_HASH_HINT",
      "description": "Tagging hash field hint.",
      "text": "20 characters long tagging hash."
    },
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "BASE_TAG",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "SELECT",
    "name": "advRegion",
    "displayName": "Region",
    "selectItems": [
      {
        "value": "ams",
        "displayValue": "EMEA"
      },
      {
        "value": "us",
        "displayValue": "Americas"
      },
      {
        "value": "asia",
        "displayValue": "Asia"
      },
      {
        "value": "custom",
        "displayValue": "Custom Region"
      }
    ],
    "simpleValueType": true,
    "help": "Please select your region. If you are not sure, contact your RTB House Customer Service Manager.",
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "BASE_TAG",
        "type": "EQUALS"
      }
    ]
  },
  {
    "type": "SELECT",
    "name": "advCustomRegion",
    "displayName": "Custom Region",
    "macrosInSelect": true,
    "selectItems": [],
    "simpleValueType": true,
    "enablingConditions": [
      {
        "paramName": "advRegion",
        "paramValue": "custom",
        "type": "EQUALS"
      }
    ],
    "help": "In this field, you should insert the region you have received from your RTB House Customer Service Manager. It should be one of the following regions (case insensitive): EMEA, Americas, Asia. If an unknown region is inserted, the region will default to EMEA."
  },
  {
    "type": "GROUP",
    "name": "tagGroup",
    "displayName": "Select tag type(s)",
    "groupStyle": "NO_ZIPPY",
    "subParams": [
      {
        "type": "CHECKBOX",
        "name": "tagHome",
        "checkboxText": "Home page code",
        "simpleValueType": true,
        "help": "This tag should be added to the home page of your website."
      },
      {
        "type": "CHECKBOX",
        "name": "tagCategory",
        "checkboxText": "Category page code",
        "simpleValueType": true,
        "subParams": [
          {
            "type": "SELECT",
            "name": "category",
            "displayName": "Category name or ID:",
            "macrosInSelect": true,
            "selectItems": [],
            "simpleValueType": true,
            "help": "Select variable that contains category name or ID.",
            "enablingConditions": [
              {
                "paramName": "tagCategory",
                "paramValue": true,
                "type": "EQUALS"
              }
            ]
          }
        ],
        "help": "This tag should be added to pages which display grouped product categories."
      },
      {
        "type": "CHECKBOX",
        "name": "tagSales",
        "checkboxText": "Sale or promo page code",
        "simpleValueType": true,
        "help": "This code should be added to sales or promotions page"
      },
      {
        "type": "CHECKBOX",
        "name": "tagNewOffers",
        "checkboxText": "New products page code",
        "simpleValueType": true,
        "help": "The code should be added to pages dedicated to displaying new products."
      },
      {
        "type": "CHECKBOX",
        "name": "tagOffer",
        "checkboxText": "Product page code",
        "simpleValueType": true,
        "subParams": [
          {
            "type": "SELECT",
            "name": "offerOfferId",
            "displayName": "Product identifier:",
            "macrosInSelect": true,
            "selectItems": [],
            "simpleValueType": true,
            "enablingConditions": [
              {
                "paramName": "tagOffer",
                "paramValue": true,
                "type": "EQUALS"
              }
            ],
            "help": "Select variable that contains product ID."
          }
        ],
        "help": "This tag should be added to the pages of individual products."
      },
      {
        "type": "CHECKBOX",
        "name": "tagWishlist",
        "checkboxText": "Wishlist or favourite code",
        "simpleValueType": true,
        "subParams": [
          {
            "type": "SELECT",
            "name": "wishlistOfferId",
            "displayName": "Product identifier:",
            "macrosInSelect": true,
            "selectItems": [],
            "simpleValueType": true,
            "enablingConditions": [
              {
                "paramName": "tagWishlist",
                "paramValue": true,
                "type": "EQUALS"
              }
            ],
            "help": "Select variable that contains product ID."
          }
        ],
        "help": "This tag should be triggered when a user adds a product to their wishlist or favourites a product.",
        "valueValidators": []
      },
      {
        "type": "CHECKBOX",
        "name": "tagSize",
        "checkboxText": "Product size selection code",
        "simpleValueType": true,
        "subParams": [
          {
            "type": "SELECT",
            "name": "productSize",
            "displayName": "Product size:",
            "macrosInSelect": true,
            "selectItems": [],
            "simpleValueType": true,
            "enablingConditions": [
              {
                "paramName": "tagSize",
                "paramValue": true,
                "type": "EQUALS"
              }
            ],
            "help": "Select variable that contains string that describes product size or (e.g., S, XXL, medium, 38, 44)."
          }
        ],
        "help": "This code should be executed when a user selects a product size or colour. The code should not be triggered with a default value. It should be triggered each time a user selects or changes the product size or colour."
      },
      {
        "type": "CHECKBOX",
        "name": "tagOfflineCheck",
        "checkboxText": "Offline store checking code",
        "simpleValueType": true,
        "help": "This code should be executed every time a user checks product availability in an offline store."
      },
      {
        "type": "CHECKBOX",
        "name": "tagListing",
        "checkboxText": "Search result page code",
        "simpleValueType": true,
        "subParams": [
          {
            "type": "SELECT",
            "name": "listingOfferIds",
            "displayName": "Product identifiers:",
            "macrosInSelect": true,
            "selectItems": [],
            "simpleValueType": true,
            "help": "Select variable that contains array with products IDs. Example: [\u0027123\u0027, \u0027456\u0027, \u0027789\u0027].",
            "enablingConditions": [
              {
                "paramName": "tagListing",
                "paramValue": true,
                "type": "EQUALS"
              }
            ]
          }
        ],
        "help": "This tag should be added to the internal site search results pages."
      },
      {
        "type": "CHECKBOX",
        "name": "tagBasketAdd",
        "checkboxText": "Shopping cart – product add code",
        "simpleValueType": true,
        "subParams": [
          {
            "type": "SELECT",
            "name": "basketAddOfferId",
            "displayName": "Product identifier:",
            "macrosInSelect": true,
            "selectItems": [],
            "simpleValueType": true,
            "help": "Select variable that contains a product ID as a string.",
            "enablingConditions": [
              {
                "paramName": "tagBasketAdd",
                "paramValue": true,
                "type": "EQUALS"
              }
            ]
          }
        ],
        "help": "This tag should be executed every time a user adds a product to the basket."
      },
      {
        "type": "CHECKBOX",
        "name": "tagBasket",
        "checkboxText": "Shopping cart - not empty",
        "simpleValueType": true,
        "subParams": [],
        "help": "This tag should only be used if it’s not possible to implement Shopping cart – product add or Shopping cart – product status code.\n\nThis tag should be executed only when the cart is not empty."
      },
      {
        "type": "CHECKBOX",
        "name": "tagBasketStatus",
        "checkboxText": "Shopping cart – status code",
        "simpleValueType": true,
        "subParams": [
          {
            "type": "SELECT",
            "name": "basketStatusOfferIds",
            "displayName": "Product identifiers:",
            "macrosInSelect": true,
            "selectItems": [],
            "simpleValueType": true,
            "enablingConditions": [
              {
                "paramName": "tagBasketStatus",
                "paramValue": true,
                "type": "EQUALS"
              }
            ],
            "help": "Select variable that contains array with products IDs that are currently in the shopping cart. Example: [\u0027123\u0027, \u0027456\u0027, \u0027789\u0027]."
          }
        ],
        "help": "This tag should be added to the basket page."
      },
      {
        "type": "CHECKBOX",
        "name": "tagStartOrder",
        "checkboxText": "Order process start code",
        "simpleValueType": true,
        "help": "This code should be added to the page which begins order processing, i.e. the checkout page displayed after creating and filling the shopping cart. This is typically the contact details form or any other page displayed after clicking the \"Go to checkout\" or similar button."
      },
      {
        "type": "CHECKBOX",
        "name": "tagOrder",
        "checkboxText": "Order confirmation code",
        "simpleValueType": true,
        "subParams": [
          {
            "type": "LABEL",
            "name": "orderRequiredParams",
            "displayName": "Required parameters",
            "enablingConditions": [
              {
                "paramName": "tagOrder",
                "paramValue": true,
                "type": "EQUALS"
              }
            ]
          },
          {
            "type": "SELECT",
            "name": "orderId",
            "displayName": "Conversion identifier:",
            "macrosInSelect": true,
            "selectItems": [],
            "simpleValueType": true,
            "enablingConditions": [
              {
                "paramName": "tagOrder",
                "paramValue": true,
                "type": "EQUALS"
              }
            ],
            "valueValidators": [
              {
                "type": "NON_EMPTY"
              }
            ],
            "help": "Select variable that contains the internal (shop) order identifier."
          },
          {
            "type": "SELECT",
            "name": "orderValue",
            "displayName": "Conversion value:",
            "macrosInSelect": true,
            "selectItems": [],
            "simpleValueType": true,
            "enablingConditions": [
              {
                "paramName": "tagOrder",
                "paramValue": true,
                "type": "EQUALS"
              }
            ],
            "valueValidators": [
              {
                "type": "NON_EMPTY"
              }
            ],
            "help": "Select variable that contains value of the order. This value should only be formatted with the decimal point (dot or comma), without the thousands separator."
          },
          {
            "type": "SELECT",
            "name": "orderOfferIds",
            "displayName": "Product identifiers:",
            "macrosInSelect": true,
            "selectItems": [],
            "simpleValueType": true,
            "enablingConditions": [
              {
                "paramName": "tagOrder",
                "paramValue": true,
                "type": "EQUALS"
              }
            ],
            "valueValidators": [
              {
                "type": "NON_EMPTY"
              }
            ],
            "help": "Select variable that contains array with products IDs that are currently in the shopping cart. Example: [\u0027123\u0027, \u0027456\u0027, \u0027789\u0027]."
          },
          {
            "type": "LABEL",
            "name": "orderOptionalParams",
            "displayName": "Optional parameters",
            "enablingConditions": [
              {
                "paramName": "tagOrder",
                "paramValue": true,
                "type": "EQUALS"
              }
            ]
          },
          {
            "type": "CHECKBOX",
            "name": "orderIsAttributedCheck",
            "checkboxText": "Is attributed",
            "simpleValueType": true,
            "subParams": [
              {
                "type": "SELECT",
                "name": "orderIsAttributed",
                "displayName": "Select variable:",
                "macrosInSelect": true,
                "selectItems": [],
                "simpleValueType": true,
                "defaultValue": "",
                "enablingConditions": [
                  {
                    "paramName": "orderIsAttributedCheck",
                    "paramValue": true,
                    "type": "EQUALS"
                  }
                ],
                "valueValidators": []
              }
            ],
            "enablingConditions": [
              {
                "paramName": "tagOrder",
                "paramValue": true,
                "type": "EQUALS"
              }
            ],
            "help": "(Optional) Select variable that returns true if conversion is attributed to RTB House and false if not."
          },
          {
            "type": "CHECKBOX",
            "name": "orderCurrencyCheck",
            "checkboxText": "Currency code",
            "simpleValueType": true,
            "subParams": [
              {
                "type": "SELECT",
                "name": "orderCurrency",
                "displayName": "Select variable:",
                "macrosInSelect": true,
                "selectItems": [],
                "simpleValueType": true,
                "enablingConditions": [
                  {
                    "paramName": "orderCurrencyCheck",
                    "paramValue": true,
                    "type": "EQUALS"
                  }
                ],
                "valueValidators": [
                  {
                    "type": "REGEX",
                    "args": [
                      "[a-zA-Z]{3}"
                    ]
                  }
                ]
              }
            ],
            "enablingConditions": [
              {
                "paramName": "tagOrder",
                "paramValue": true,
                "type": "EQUALS"
              }
            ],
            "help": "(Optional) Select variable that returns conversion currency formatted as 3 digit currency code, e.g. \"USD\"."
          },
          {
            "type": "CHECKBOX",
            "name": "orderTagSubclassCheck",
            "checkboxText": "Order subclass",
            "simpleValueType": true,
            "subParams": [
              {
                "type": "SELECT",
                "name": "orderTagSubClass",
                "displayName": "Select subclass:",
                "macrosInSelect": false,
                "selectItems": [
                  {
                    "value": "purchase",
                    "displayValue": "purchase"
                  },
                  {
                    "value": "travelflight",
                    "displayValue": "travelflight"
                  },
                  {
                    "value": "travelhotel",
                    "displayValue": "travelhotel"
                  },
                  {
                    "value": "travelpackage",
                    "displayValue": "travelpackage"
                  },
                  {
                    "value": "salepromo",
                    "displayValue": "salepromo"
                  },
                  {
                    "value": "salenew",
                    "displayValue": "salenew"
                  },
                  {
                    "value": "salepremium",
                    "displayValue": "salepremium"
                  },
                  {
                    "value": "ncsale",
                    "displayValue": "ncsale"
                  },
                  {
                    "value": "ecsale",
                    "displayValue": "ecsale"
                  }
                ],
                "simpleValueType": true,
                "enablingConditions": [
                  {
                    "paramName": "orderTagSubclassCheck",
                    "paramValue": true,
                    "type": "EQUALS"
                  }
                ],
                "valueValidators": [
                  {
                    "type": "NON_EMPTY"
                  }
                ],
                "defaultValue": "purchase"
              }
            ],
            "enablingConditions": [
              {
                "paramName": "tagOrder",
                "paramValue": true,
                "type": "EQUALS"
              }
            ],
            "help": "(Optional) If requested, select the subclass sent by your RTB House representative. Default value is \"purchase\"."
          }
        ],
        "help": "This tag should be triggered on the order confirmation page for all orders placed on the website, regardless of traffic source."
      },
      {
        "type": "CHECKBOX",
        "name": "tagConversion",
        "checkboxText": "Conversion code",
        "simpleValueType": true,
        "subParams": [
          {
            "type": "LABEL",
            "name": "selectConversionClass",
            "displayName": "Select conversion class",
            "enablingConditions": [
              {
                "paramName": "tagConversion",
                "paramValue": true,
                "type": "EQUALS"
              }
            ]
          },
          {
            "type": "SELECT",
            "name": "conversionClass",
            "displayName": "Conversion class:",
            "macrosInSelect": false,
            "selectItems": [
              {
                "value": "action",
                "displayValue": "ACTION"
              },
              {
                "value": "appaction",
                "displayValue": "APP_ACTION"
              },
              {
                "value": "appinstall",
                "displayValue": "APP_INSTALL"
              },
              {
                "value": "micropayment",
                "displayValue": "MICROPAYMENT"
              },
              {
                "value": "order",
                "displayValue": "ORDER"
              }
            ],
            "simpleValueType": true,
            "enablingConditions": [
              {
                "paramName": "tagConversion",
                "paramValue": true,
                "type": "EQUALS"
              }
            ],
            "subParams": [
              {
                "type": "SELECT",
                "name": "actionSubClass",
                "displayName": "ACTION subclass:",
                "macrosInSelect": false,
                "selectItems": [
                  {
                    "value": "shownumber",
                    "displayValue": "shownumber"
                  },
                  {
                    "value": "call",
                    "displayValue": "call"
                  },
                  {
                    "value": "message",
                    "displayValue": "message"
                  },
                  {
                    "value": "text",
                    "displayValue": "text"
                  },
                  {
                    "value": "chat",
                    "displayValue": "chat"
                  },
                  {
                    "value": "postad",
                    "displayValue": "postad"
                  },
                  {
                    "value": "form",
                    "displayValue": "form"
                  },
                  {
                    "value": "newsletter",
                    "displayValue": "newsletter"
                  },
                  {
                    "value": "loyalty",
                    "displayValue": "loyalty"
                  },
                  {
                    "value": "account",
                    "displayValue": "account"
                  },
                  {
                    "value": "favourite",
                    "displayValue": "favourite"
                  },
                  {
                    "value": "propertyrent",
                    "displayValue": "propertyrent"
                  },
                  {
                    "value": "propertybuilder",
                    "displayValue": "propertybuilder"
                  },
                  {
                    "value": "propertyprivate",
                    "displayValue": "propertyprivate"
                  },
                  {
                    "value": "testdrive",
                    "displayValue": "testdrive"
                  },
                  {
                    "value": "viewoffer",
                    "displayValue": "viewoffer"
                  },
                  {
                    "value": "dwnldprclist",
                    "displayValue": "dwnldprclist"
                  },
                  {
                    "value": "dwnldprclista",
                    "displayValue": "dwnldprclista"
                  },
                  {
                    "value": "finddealer",
                    "displayValue": "finddealer"
                  },
                  {
                    "value": "clickthrough",
                    "displayValue": "clickthrough"
                  },
                  {
                    "value": "custom1",
                    "displayValue": "custom1"
                  },
                  {
                    "value": "custom2",
                    "displayValue": "custom2"
                  }
                ],
                "simpleValueType": true,
                "enablingConditions": [
                  {
                    "paramName": "conversionClass",
                    "paramValue": "action",
                    "type": "EQUALS"
                  }
                ],
                "valueValidators": [
                  {
                    "type": "NON_EMPTY"
                  }
                ]
              },
              {
                "type": "SELECT",
                "name": "orderSubClass",
                "displayName": "ORDER subclass:",
                "macrosInSelect": false,
                "selectItems": [
                  {
                    "value": "purchase",
                    "displayValue": "purchase"
                  },
                  {
                    "value": "travelflight",
                    "displayValue": "travelflight"
                  },
                  {
                    "value": "travelhotel",
                    "displayValue": "travelhotel"
                  },
                  {
                    "value": "travelpackage",
                    "displayValue": "travelpackage"
                  },
                  {
                    "value": "salepromo",
                    "displayValue": "salepromo"
                  },
                  {
                    "value": "salenew",
                    "displayValue": "salenew"
                  },
                  {
                    "value": "salepremium",
                    "displayValue": "salepremium"
                  },
                  {
                    "value": "ncsale",
                    "displayValue": "ncsale"
                  },
                  {
                    "value": "ecsale",
                    "displayValue": "ecsale"
                  }
                ],
                "simpleValueType": true,
                "enablingConditions": [
                  {
                    "paramName": "conversionClass",
                    "paramValue": "order",
                    "type": "EQUALS"
                  }
                ],
                "valueValidators": [
                  {
                    "type": "NON_EMPTY"
                  }
                ]
              },
              {
                "type": "SELECT",
                "name": "micropaymentSubClass",
                "displayName": "MICROPAYMENT subclass:",
                "macrosInSelect": false,
                "selectItems": [
                  {
                    "value": "firstbuy",
                    "displayValue": "firstbuy"
                  },
                  {
                    "value": "buyitem",
                    "displayValue": "buyitem"
                  },
                  {
                    "value": "buycurrency",
                    "displayValue": "buycurrency"
                  },
                  {
                    "value": "buycurrencypr",
                    "displayValue": "buycurrencypr"
                  },
                  {
                    "value": "buypack",
                    "displayValue": "buypack"
                  },
                  {
                    "value": "unlockpremium",
                    "displayValue": "unlockpremium"
                  }
                ],
                "simpleValueType": true,
                "enablingConditions": [
                  {
                    "paramName": "conversionClass",
                    "paramValue": "micropayment",
                    "type": "EQUALS"
                  }
                ],
                "valueValidators": [
                  {
                    "type": "NON_EMPTY"
                  }
                ]
              },
              {
                "type": "SELECT",
                "name": "appinstallSubClass",
                "displayName": "APP_INSTALL subclass:",
                "macrosInSelect": false,
                "selectItems": [
                  {
                    "value": "android",
                    "displayValue": "android"
                  },
                  {
                    "value": "ios",
                    "displayValue": "ios"
                  },
                  {
                    "value": "install",
                    "displayValue": "install"
                  }
                ],
                "simpleValueType": true,
                "enablingConditions": [
                  {
                    "paramName": "conversionClass",
                    "paramValue": "appinstall",
                    "type": "EQUALS"
                  }
                ],
                "valueValidators": [
                  {
                    "type": "NON_EMPTY"
                  }
                ]
              },
              {
                "type": "SELECT",
                "name": "appactionSubClass",
                "displayName": "APP_ACTION subclass:",
                "macrosInSelect": false,
                "selectItems": [
                  {
                    "value": "openapp",
                    "displayValue": "openapp"
                  },
                  {
                    "value": "levela",
                    "displayValue": "levela"
                  },
                  {
                    "value": "levelb",
                    "displayValue": "levelb"
                  },
                  {
                    "value": "rewardedad",
                    "displayValue": "rewardedad"
                  }
                ],
                "simpleValueType": true,
                "enablingConditions": [
                  {
                    "paramName": "conversionClass",
                    "paramValue": "appaction",
                    "type": "EQUALS"
                  }
                ],
                "valueValidators": [
                  {
                    "type": "NON_EMPTY"
                  }
                ]
              }
            ],
            "valueValidators": [
              {
                "type": "NON_EMPTY"
              }
            ]
          },
          {
            "type": "LABEL",
            "name": "optionalParams",
            "displayName": "Select parameters",
            "enablingConditions": [
              {
                "paramName": "tagConversion",
                "paramValue": true,
                "type": "EQUALS"
              }
            ]
          },
          {
            "type": "CHECKBOX",
            "name": "conversionIdCheck",
            "checkboxText": "Conversion identifier",
            "simpleValueType": true,
            "subParams": [
              {
                "type": "SELECT",
                "name": "conversionId",
                "displayName": "Select variable:",
                "macrosInSelect": true,
                "selectItems": [],
                "simpleValueType": true,
                "enablingConditions": [
                  {
                    "paramName": "conversionIdCheck",
                    "paramValue": true,
                    "type": "EQUALS"
                  }
                ],
                "valueValidators": [
                  {
                    "type": "NON_EMPTY"
                  }
                ]
              }
            ],
            "enablingConditions": [
              {
                "paramName": "tagConversion",
                "paramValue": true,
                "type": "EQUALS"
              }
            ],
            "help": "(Optional) Select variable that contains the internal (shop) order identifier."
          },
          {
            "type": "CHECKBOX",
            "name": "conversionValueCheck",
            "checkboxText": "Conversion value",
            "simpleValueType": true,
            "subParams": [
              {
                "type": "SELECT",
                "name": "conversionValue",
                "displayName": "Select variable:",
                "macrosInSelect": true,
                "selectItems": [],
                "simpleValueType": true,
                "enablingConditions": [
                  {
                    "paramName": "conversionValueCheck",
                    "paramValue": true,
                    "type": "EQUALS"
                  }
                ],
                "valueValidators": [
                  {
                    "type": "NON_EMPTY"
                  }
                ]
              }
            ],
            "enablingConditions": [
              {
                "paramName": "tagConversion",
                "paramValue": true,
                "type": "EQUALS"
              }
            ],
            "help": "(Optional) Select variable that contains value of the order. This value should only be formatted with the decimal point (dot or comma), without the thousands separator."
          },
          {
            "type": "CHECKBOX",
            "name": "conversionOfferIdsCheck",
            "checkboxText": "Product identifiers",
            "simpleValueType": true,
            "subParams": [
              {
                "type": "SELECT",
                "name": "conversionOfferIds",
                "displayName": "Select variable:",
                "macrosInSelect": true,
                "selectItems": [],
                "simpleValueType": true,
                "enablingConditions": [
                  {
                    "paramName": "conversionOfferIdsCheck",
                    "paramValue": true,
                    "type": "EQUALS"
                  }
                ],
                "valueValidators": [
                  {
                    "type": "NON_EMPTY"
                  }
                ]
              }
            ],
            "enablingConditions": [
              {
                "paramName": "tagConversion",
                "paramValue": true,
                "type": "EQUALS"
              }
            ],
            "help": "(Optional) Select variable that contains array with products IDs that are currently in the shopping cart. Example: [\u0027123\u0027, \u0027456\u0027, \u0027789\u0027]."
          },
          {
            "type": "CHECKBOX",
            "name": "conversionIsAttributedCheck",
            "checkboxText": "Is attributed",
            "simpleValueType": true,
            "subParams": [
              {
                "type": "SELECT",
                "name": "conversionIsAttributed",
                "displayName": "Select variable:",
                "macrosInSelect": true,
                "selectItems": [],
                "simpleValueType": true,
                "enablingConditions": [
                  {
                    "paramName": "conversionIsAttributedCheck",
                    "paramValue": true,
                    "type": "EQUALS"
                  }
                ],
                "valueValidators": []
              }
            ],
            "enablingConditions": [
              {
                "paramName": "tagConversion",
                "paramValue": true,
                "type": "EQUALS"
              }
            ],
            "help": "(Optional) Select variable that returns true if conversion should be attributed to RTB House and false if not."
          },
          {
            "type": "CHECKBOX",
            "name": "conversionCurrencyCheck",
            "checkboxText": "Currency code",
            "simpleValueType": true,
            "subParams": [
              {
                "type": "SELECT",
                "name": "conversionCurrency",
                "displayName": "Select variable:",
                "macrosInSelect": true,
                "selectItems": [],
                "simpleValueType": true,
                "enablingConditions": [
                  {
                    "paramName": "conversionCurrencyCheck",
                    "paramValue": true,
                    "type": "EQUALS"
                  }
                ],
                "valueValidators": []
              }
            ],
            "enablingConditions": [
              {
                "paramName": "tagConversion",
                "paramValue": true,
                "type": "EQUALS"
              }
            ],
            "help": "(Optional) Select variable that returns conversion currency formatted as 3 digit currency code, e.g. \"USD\"."
          }
        ],
        "help": "This tag should be triggered for other types of conversions placed on the website, regardless of traffic source."
      },
      {
        "type": "CHECKBOX",
        "name": "tagPlacebo",
        "checkboxText": "Other pages code",
        "simpleValueType": true,
        "help": "In order to attribute each order to the right source, it is important that each page of the website (especially landing pages of all advertising campaigns – both current campaigns and future ones) has a proper RTB House tag implemented. If there are pages that do not have any of the tags listed above implemented, then this tag should be added. This tag can also be added to all the pages of the site in addition to any of the other tags listed above."
      },
      {
        "type": "LABEL",
        "name": "labelOther",
        "displayName": "Other"
      },
      {
        "type": "CHECKBOX",
        "name": "tagUid",
        "checkboxText": "User ID (cross-device)",
        "simpleValueType": true,
        "subParams": [
          {
            "type": "SELECT",
            "name": "uid",
            "displayName": "Variable containing the current user identifier:",
            "macrosInSelect": true,
            "selectItems": [],
            "simpleValueType": true,
            "enablingConditions": [
              {
                "paramName": "tagUid",
                "paramValue": true,
                "type": "EQUALS"
              }
            ],
            "help": "Select variable that contains string with an anonymized user identifier."
          }
        ],
        "help": "The code should be added when you want to pass a unique and anonymized ID of the user - for example for cross-device targeting possibilities."
      },
      {
        "type": "CHECKBOX",
        "name": "tagAid",
        "checkboxText": "Anonymous user ID",
        "simpleValueType": true,
        "subParams": [
          {
            "type": "SELECT",
            "name": "aid",
            "displayName": "Variable containing the current anonymous user identifier:",
            "macrosInSelect": true,
            "selectItems": [],
            "simpleValueType": true,
            "enablingConditions": [
              {
                "paramName": "tagAid",
                "paramValue": true,
                "type": "EQUALS"
              }
            ],
            "help": "Select variable that contains string with an anonymized ID of the user."
          }
        ],
        "help": "The code should be added when you want to pass a unique ID of an anonymous user."
      },
      {
        "type": "CHECKBOX",
        "name": "tagSid",
        "checkboxText": "Session ID",
        "simpleValueType": true,
        "subParams": [
          {
            "type": "SELECT",
            "name": "sid",
            "displayName": "Variable containing the current user session identifier:",
            "macrosInSelect": true,
            "selectItems": [],
            "simpleValueType": true,
            "enablingConditions": [
              {
                "paramName": "tagSid",
                "paramValue": true,
                "type": "EQUALS"
              }
            ],
            "help": "Select variable that contains string with a session ID of the user."
          }
        ],
        "help": "The code should be added when you want to pass an unique session ID of the user."
      },
      {
        "type": "CHECKBOX",
        "name": "tagConsent",
        "checkboxText": "Non-consent code",
        "simpleValueType": true,
        "help": "The tag should be executed once a user has withdrawn the consent for the advertiser to process their data for the purpose of displaying personalized ads of the advertiser."
      },
      {
        "type": "CHECKBOX",
        "name": "tagCustom",
        "checkboxText": "Custom Codes",
        "simpleValueType": true,
        "help": "Predefined custom tags. These should be consulted with RTB House Customer Service Manager."
      }
    ],
    "enablingConditions": [
      {
        "paramName": "tagType",
        "paramValue": "EVENT_TAG",
        "type": "EQUALS"
      }
    ],
    "help": "Select tags and their values"
  },
  {
    "type": "PARAM_TABLE",
    "name": "customTagsTable",
    "displayName": "Custom Tags",
    "paramTableColumns": [
      {
        "param": {
          "type": "TEXT",
          "name": "customTagName",
          "displayName": "Custom Tag Name",
          "simpleValueType": true,
          "help": "The value should be consulted with RTB House Customer Service Manager.",
          "valueValidators": [
            {
              "type": "NON_EMPTY"
            },
            {
              "type": "REGEX",
              "args": [
                "^[a-zA-Z0-9\\-]+$"
              ]
            }
          ],
          "valueHint": "Words, numbers and \u0027-\u0027 accepted"
        },
        "isUnique": true
      },
      {
        "param": {
          "type": "TEXT",
          "name": "customTagValue",
          "displayName": "Custom Tag Value",
          "simpleValueType": true,
          "help": "The value should be consulted with RTB House Customer Service Manager."
        },
        "isUnique": false
      }
    ],
    "enablingConditions": [
      {
        "paramName": "tagCustom",
        "paramValue": true,
        "type": "EQUALS"
      }
    ],
    "newRowButtonText": "Add"
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const makeString = require('makeString');
const injectScript = require('injectScript');
const createQueue = require('createQueue');
const copyFromWindow = require('copyFromWindow');
const setInWindow = require('setInWindow');
const logToConsole = require('logToConsole');

const rtbhEvents = copyFromWindow('rtbhEvents') || [];
const rtbhEventsPush = createQueue('rtbhEvents');

const templateTagType = makeString(data.tagType);

const onSuccess = () => {
  data.gtmOnSuccess();
};

const onFailure = () => {
  data.gtmOnFailure();
};

const getDataCenter = () => {
  if (data.advRegion !== 'custom') {
    return data.advRegion;
  }
  
  const customRegion = makeString(data.advCustomRegion).toLowerCase();
  const regionMap = {
    emea: 'ams',
    americas: 'us',
    asia: 'asia',
  };
  
  const dataCenter = regionMap[customRegion];
  if (!dataCenter) {
    return 'ams';
  }
  
  return dataCenter;
};

if (templateTagType === 'BASE_TAG') {
  
  const taggingHash = data.advTaggingHash;
  const dataCenter = getDataCenter();
  const baseScriptUrl = 'https://tags.creativecdn.com/' + makeString(taggingHash) + '.js';

  (function (dn, t, r) {
    setInWindow(dn, [], false);
    if (rtbhEvents.filter(function (e) { return e.eventType === 'init'; }).length) {
      return;
    }
    rtbhEventsPush({ eventType: 'init', value: t, dc: r });
  })('rtbhEvents', taggingHash, dataCenter);


  injectScript(baseScriptUrl, onSuccess, onFailure, baseScriptUrl);
}

if (templateTagType === 'EVENT_TAG') {

  const tagsRaw = [];
  for (const key in data) {
    if (key.indexOf('tag') !== -1 && data[key]) {
      tagsRaw.push(key);
    }
  }

  if (!tagsRaw.length) {
    onFailure();
  }
  
  tagsRaw.forEach((tag) => {

    const code = {};

    switch (tag) {

      case 'tagPlacebo':
        code.eventType = 'placebo';

        break;

      case 'tagHome':
        code.eventType = 'home';

        break;

      case 'tagOffer':
        code.eventType = 'offer';
        code.offerId = data.offerOfferId;

        break;

      case 'tagBasketStatus':
        code.eventType = 'basketstatus';
        code.offerIds = data.basketStatusOfferIds;

        break;

      case 'tagBasketAdd':
        code.eventType = 'basketadd';
        code.offerId = data.basketAddOfferId;

        break;

      case 'tagBasket':
        code.eventType = 'basket';

        break;

      case 'tagListing':
        code.eventType = 'listing';
        code.offerIds = data.listingOfferIds;

        break;

      case 'tagStartOrder':
        code.eventType = 'startorder';

        break;

      case 'tagCustom':
        const customTagsTable = data.customTagsTable;
        customTagsTable.forEach((customTag) => {
          const customCode = {};
          customCode.eventType = 'custom';
          customCode.name = customTag.customTagName;
          customCode.value = customTag.customTagValue;
          rtbhEventsPush(customCode);
        });

        break;

      case 'tagOptout':
        code.eventType = 'optout';

        break;

      case 'tagCategory':
        code.eventType = 'category';
        code.categoryId = data.category;

        break;

      case 'tagOrder':
        code.eventType = 'conversion';
        code.conversionClass = 'order';
        code.conversionSubClass = data.orderTagSubclassCheck ? data.orderTagSubClass : 'purchase';
        code.conversionId = data.orderId;
        code.conversionValue = data.orderValue;
        code.offerIds = data.orderOfferIds;
        
        //Optional params
        if (data.orderIsAttributedCheck) {
          code.isAttributed = data.orderIsAttributed;
        }

        if (data.orderCurrencyCheck) {
          code.conversionCurrency = data.orderCurrency;
        }

        break;
        
      case 'tagConversion':
        code.eventType = 'conversion';
        code.conversionClass = data.conversionClass;
        code.conversionSubClass = data[data.conversionClass + 'SubClass'];
        
        //Optional params
        if (data.conversionIdCheck) {
          code.conversionId = data.conversionId;
        }        
        if (data.conversionValueCheck) {
          code.conversionValue = data.conversionValue;
        }        
        if (data.conversionOfferIdsCheck) {
          code.offerIds = data.conversionOfferIds;
        }        
        if (data.conversionIsAttributedCheck) {
          code.isAttributed = data.conversionIsAttributed;
        }
        if (data.conversionCurrencyCheck) {
          code.conversionCurrency = data.conversionCurrency;
        }

        break;

      case 'tagUid':
        code.eventType = 'uid';
        code.id = data.uid;

        break;

      case 'tagSid':
        code.eventType = 'sid';
        code.id = data.sid;

        break;

      case 'tagAid':
        code.eventType = 'aid';
        code.id = data.aid;

        break;

      case 'tagSales':
        code.eventType = 'sales';

        break;

      case 'tagNewOffers':
        code.eventType = 'newoffers';

        break;

      case 'tagOfflineCheck':
        code.eventType = 'offlinecheck';

        break;

      case 'tagSize':
        code.eventType = 'size';
        code.size = data.productSize;

        break;

      case 'tagWishlist':
        code.eventType = 'wishlist';
        code.offerId = data.wishlistOfferId;

        break;

      case 'tagConsent':
        code.eventType = 'consent';
        code.consentType = data.consentType;

        break;

    }

    if (code.eventType) {
      rtbhEventsPush(code);
    }

  });
  
  onSuccess();
}


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "rtbhEvents"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://tags.creativecdn.com/*.js"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 8/20/2019, 3:32:36 PM


